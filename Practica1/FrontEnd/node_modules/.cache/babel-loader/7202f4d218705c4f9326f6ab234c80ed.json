{"ast":null,"code":"import _toConsumableArray from\"/home/stevengez/Documentos/GitHub/SOPES1/Practica1/FrontEnd/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _asyncToGenerator from\"/home/stevengez/Documentos/GitHub/SOPES1/Practica1/FrontEnd/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _classCallCheck from\"/home/stevengez/Documentos/GitHub/SOPES1/Practica1/FrontEnd/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/home/stevengez/Documentos/GitHub/SOPES1/Practica1/FrontEnd/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/home/stevengez/Documentos/GitHub/SOPES1/Practica1/FrontEnd/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/home/stevengez/Documentos/GitHub/SOPES1/Practica1/FrontEnd/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import _regeneratorRuntime from\"/home/stevengez/Documentos/GitHub/SOPES1/Practica1/FrontEnd/node_modules/@babel/runtime/regenerator/index.js\";import React,{Component}from'react';import simpletime from'simpletime';import DataTable from'react-data-table-component';import{API_SERVER,API_PORT}from'../Config/credentials';import{jsx as _jsx}from\"react/jsx-runtime\";var Records=/*#__PURE__*/function(_Component){_inherits(Records,_Component);var _super=_createSuper(Records);function Records(props){var _this;_classCallCheck(this,Records);_this=_super.call(this,props);_this.state={data:[]};_this.getRecordsFromAPI=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var requestOptions,response,result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:requestOptions={method:'GET',headers:{'Content-Type':'application/json'}};_context.next=3;return fetch(\"\".concat(API_SERVER,\":\").concat(API_PORT,\"/getRecords/\"),requestOptions);case 3:response=_context.sent;_context.next=6;return response.json();case 6:result=_context.sent;return _context.abrupt(\"return\",result);case 8:case\"end\":return _context.stop();}}},_callee);}));_this.addLocalOperation=function(newOperation){console.log(\"new entry:\",newOperation);var newData=_toConsumableArray(_this.state.data);newData.unshift(newOperation);_this.setState({data:newData});};_this.columns=[{name:'Timestamp',selector:function selector(row){return simpletime.applyFormatDate(row.timestamp,\"d/M/yy h:mm\");}},{name:'Left',selector:function selector(row){return row.left;}},{name:'Operation',selector:function selector(row){return row.operator;}},{name:'Right',selector:function selector(row){return row.right;}},{name:'Result',selector:function selector(row){switch(row.operator){case\"+\":return(row.left+row.right).toString();case\"-\":return(row.left-row.right).toString();case\"*\":return(row.left*row.right).toString();case\"/\":return(row.left/row.right).toString();default:return\"Syntax Error\";}}}];_this.getRecordsFromAPI().then(function(result){var opList=[];result.forEach(function(item){opList.push({left:item.left,right:item.right,operator:item.operator,timestamp:item.timestamp});});_this.setState({data:opList});});return _this;}_createClass(Records,[{key:\"componentDidMount\",value:function componentDidMount(){this.props.setLocalHandler(this.addLocalOperation);}},{key:\"render\",value:function render(){return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(DataTable,{pagination:true,columns:this.columns,data:this.state.data})});}}]);return Records;}(Component);export{Records as default};","map":{"version":3,"sources":["/home/stevengez/Documentos/GitHub/SOPES1/Practica1/FrontEnd/src/Components/Records.js"],"names":["React","Component","simpletime","DataTable","API_SERVER","API_PORT","Records","props","state","data","getRecordsFromAPI","requestOptions","method","headers","fetch","response","json","result","addLocalOperation","newOperation","console","log","newData","unshift","setState","columns","name","selector","row","applyFormatDate","timestamp","left","operator","right","toString","then","opList","forEach","item","push","setLocalHandler"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport simpletime from 'simpletime';\nimport DataTable from 'react-data-table-component';\nimport { API_SERVER, API_PORT } from '../Config/credentials';\n\n\n\nexport default class Records extends Component {\n\n    state = {\n        data: []\n    };\n\n    constructor(props){\n        super(props);\n\n        this.columns = [\n            {\n                name: 'Timestamp',\n                selector: row => simpletime.applyFormatDate(row.timestamp, \"d/M/yy h:mm\")\n            },\n            {\n                name: 'Left',\n                selector: row => row.left\n            },\n            {\n                name: 'Operation',\n                selector: row => row.operator\n            },\n\n            {\n                name: 'Right',\n                selector: row => row.right\n            },\n            {\n                name: 'Result',\n                selector: row => {\n                    switch(row.operator){\n                        case \"+\":\n                            return (row.left+row.right).toString();\n                        case \"-\":\n                            return (row.left-row.right).toString();\n                        case \"*\":\n                            return (row.left*row.right).toString();\n                        case \"/\":\n                            return (row.left/row.right).toString();\n                        default:\n                            return \"Syntax Error\";\n                    }\n                }\n            },\n            \n        ];\n\n        this.getRecordsFromAPI().then((result) => {\n            let opList = [];\n            result.forEach((item) => {\n                opList.push({\n                    left: item.left,\n                    right: item.right,\n                    operator: item.operator,\n                    timestamp: item.timestamp\n                });\n            });\n\n            this.setState({\n                data: opList\n              });\n        });\n    }\n\n\n\n    componentDidMount(){\n        this.props.setLocalHandler(this.addLocalOperation);\n    }\n\n    getRecordsFromAPI = async () => {\n        const requestOptions = {\n            method: 'GET',\n            headers: { 'Content-Type':'application/json'}\n        }\n\n        const response = await fetch(`${API_SERVER}:${API_PORT}/getRecords/`, requestOptions);\n        const result = await response.json();\n        return result;\n    }\n\n    addLocalOperation = (newOperation) => {\n        console.log(\"new entry:\", newOperation);\n        let newData = [...this.state.data];\n        newData.unshift(newOperation);\n        \n        this.setState({\n            data: newData\n        })\n    }\n\n    render(){\n        return(\n            <div>\n                <DataTable pagination columns={this.columns} data={this.state.data}/>\n            </div>\n        );\n    }\n}"]},"metadata":{},"sourceType":"module"}